(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{135:function(e,t,a){},140:function(e,t,a){},143:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(69),o=a.n(l),d=(a(77),a(110),a(128),a(133),a(135),a(3)),c=a(4),s=a(6),i=a(5),m=a(7),h=a(1),u=a(12),b=a.n(u),p=(a(67),a(137),a(138),a(140),a(68),a(27)),f=a.n(p),v=a(70),E=a.n(v),y=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(s.a)(this,Object(i.a)(t).call(this,e))).delete=a.delete.bind(Object(h.a)(Object(h.a)(a))),a.editItem=a.editItem.bind(Object(h.a)(Object(h.a)(a))),a.likeItem=a.likeItem.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"likeItem",value:function(){this.props.likeItem(this.props.data.CardId)}},{key:"editItem",value:function(){this.props.editItem(this.props.Cardtype,this.props.data.CardId,this.props.data.CardBody,this.props.data.Likes)}},{key:"delete",value:function(){window.confirm("Delete this card?")&&this.props.delete(this.props.Cardtype,this.props.data.CardId)}},{key:"render",value:function(){return r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"board__card"},r.a.createElement("div",{className:"card__body"},r.a.createElement("div",{className:"card__text"},r.a.createElement("p",{tabIndex:"0","aria-label":this.props.data.CardBody},this.props.data.CardBody)),r.a.createElement("div",{className:"card__delete"},r.a.createElement("button",{className:"reset-button-style card__delete--btn",alt:"delete","aria-label":"Delete card",onClick:this.delete},r.a.createElement("img",{src:f.a})))),r.a.createElement("div",{className:"card__footer"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6 card__footer--heart"},r.a.createElement("button",{className:"reset-button-style card__footer--img mx-auto d-block",onClick:this.likeItem,"aria-label":"Like card",alt:"Like card"},r.a.createElement("span",{className:"fa fa-heart"}),r.a.createElement("span",{className:"card__like-count"},"+"+this.props.data.Likes))),r.a.createElement("div",{className:"col-6"},r.a.createElement("button",{className:"reset-button-style mx-auto d-block",onClick:this.editItem,"aria-label":"Edit card",alt:"edit card"},r.a.createElement("img",{className:"card__footer--img",src:E.a})))))))}}]),t}(r.a.Component),w="/api/createcard",g="/api/editcard",N="/api/deletecard",I="/api/getallboards",j="/api/getboardbyid",O="/api/createboard",k="/api/deleteboard",B="/api/likecard",_="/api/exportboard",C=3e4;var S={getURLParam:function(e,t){return decodeURI(e.search.replace(new RegExp("^(?:.*[&\\?]"+encodeURI(t).replace(/[\.\+\*]/g,"\\$&")+"(?:\\=([^&]*))?)?.*$","i"),"$1"))}},T=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(s.a)(this,Object(i.a)(t).call(this,e))).state={boardData:[],cardData:[],formState:{title:"Modal Title",state:"none"},editing:{state:!1},refreshCount:10,intervalId:null},a.addWentWell=a.addWentWell.bind(Object(h.a)(Object(h.a)(a))),a.addWentBadly=a.addWentBadly.bind(Object(h.a)(Object(h.a)(a))),a.addActionItem=a.addActionItem.bind(Object(h.a)(Object(h.a)(a))),a.saveChanges=a.saveChanges.bind(Object(h.a)(Object(h.a)(a))),a.deleteCard=a.deleteCard.bind(Object(h.a)(Object(h.a)(a))),a.refreshData=a.refreshData.bind(Object(h.a)(Object(h.a)(a))),a.editItem=a.editItem.bind(Object(h.a)(Object(h.a)(a))),a.likeItem=a.likeItem.bind(Object(h.a)(Object(h.a)(a))),a.getAutoRefreshStatus=a.getAutoRefreshStatus.bind(Object(h.a)(Object(h.a)(a))),a.refreshTimer=a.refreshTimer.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"refreshData",value:function(){var e=this,t=S.getURLParam(window.location,"boardId");fetch(j,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({boardId:t})}).then(function(e){return e.json()}).then(function(t){e.setState({boardData:t.boardInfo,cardData:t.cardInfo})})}},{key:"deleteCard",value:function(e,t){var a=this,n=S.getURLParam(window.location,"boardId");fetch(N,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({boardId:n,cardType:e,cardId:t,method:"delete"})}).then(function(e){return e.json()}).then(function(e){a.setState({cardData:e.cardInfo})})}},{key:"addWentWell",value:function(){this.setState({formState:{title:"The Good",state:"wentwell"}})}},{key:"addWentBadly",value:function(){this.setState({formState:{title:"The Bad",state:"wentbadly"}})}},{key:"addActionItem",value:function(){this.setState({formState:{title:"Action Item",state:"actionitem"}})}},{key:"editItem",value:function(e,t,a,n){this.setState({editing:{state:!0,cardType:e,cardId:t,likes:n}}),document.getElementById("newBody").value=a,b()("#wentWellModal").modal()}},{key:"likeItem",value:function(e){var t=this,a={boardId:S.getURLParam(window.location,"boardId"),cardId:e};fetch(B,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(a)}).then(function(e){return e.json()}).then(function(e){t.setState({cardData:e.cardInfo})})}},{key:"sendMessage",value:function(e){e.boardId=S.getURLParam(window.location,"boardId");var t=this,a="";if("add"===e.method)a=w;else{if("edit"!==e.method)return void alert("Error: unknown message type!");a=g}return fetch(a,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){t.setState({cardData:e.cardInfo}),document.getElementById("newBody").value="",b()("#wentWellModal").modal("hide")})}},{key:"saveChanges",value:function(){var e=S.getURLParam(window.location,"boardId"),t="add",a=null,n=this.state.formState.state,r=0;!0===this.state.editing.state&&(t="edit",a=this.state.editing.cardId,n=this.state.editing.cardType,r=this.state.editing.likes,this.setState({editing:{state:!1}}));var l={method:t,boardId:e,cardType:n,cardId:a,cardBody:document.getElementById("newBody").value,likes:r};this.sendMessage(l)}},{key:"getAutoRefreshStatus",value:function(){return this.state.refreshCount<=0?r.a.createElement("span",{className:"page__refresh-status"},"Auto-refresh: off"):null}},{key:"refreshTimer",value:function(){this.state.refreshCount<=0?(console.log("auto-refresh stopped"),clearInterval(this.state.intervalId)):(this.setState(function(e){return{refreshCount:e.refreshCount-1}}),this.refreshData())}},{key:"componentDidMount",value:function(){this.refreshData();var e=setInterval(this.refreshTimer,C);this.setState({intervalId:e}),b()("#wentWellModal").on("shown.bs.modal",function(){b()("#newBody").trigger("focus")})}},{key:"render",value:function(){for(var e=[],t=[],a=[],n=0;n<this.state.cardData.length;n++)"wentwell"===this.state.cardData[n].Cardtype?e.push(r.a.createElement(y,{key:n,data:this.state.cardData[n],cardType:"wentwell",delete:this.deleteCard,editItem:this.editItem,likeItem:this.likeItem})):"wentbadly"===this.state.cardData[n].Cardtype?t.push(r.a.createElement(y,{key:n,data:this.state.cardData[n],cardType:"wentwell",delete:this.deleteCard,editItem:this.editItem,likeItem:this.likeItem})):"actionitem"===this.state.cardData[n].Cardtype&&a.push(r.a.createElement(y,{key:n,data:this.state.cardData[n],cardType:"wentwell",delete:this.deleteCard,editItem:this.editItem,likeItem:this.likeItem}));var l="";return this.state.boardData.length>0&&(l=this.state.boardData[0].BoardTitle),r.a.createElement("div",null,r.a.createElement("div",{className:"row page__title"},r.a.createElement("div",{className:"col-9"},r.a.createElement("div",null,r.a.createElement("h2",null,l))),r.a.createElement("div",{className:"col-3"},this.getAutoRefreshStatus(),r.a.createElement("button",{type:"button",className:"btn btn-primary btn-refresh",onClick:this.refreshData},"Refresh Board"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-md-4 went-well"},r.a.createElement("div",{className:"column__title"},r.a.createElement("h3",null,"The Good"),r.a.createElement("button",{className:"reset-button-style add-btn",onClick:this.addWentWell,"data-toggle":"modal","data-target":"#wentWellModal","aria-label":"Add new what went well card"},r.a.createElement("span",{className:"fa fa-plus-circle"}))),r.a.createElement("div",{className:"row"},e)),r.a.createElement("div",{className:"col-12 col-md-4 went-badly"},r.a.createElement("div",{className:"column__title"},r.a.createElement("h3",null,"The Bad"),r.a.createElement("button",{className:"reset-button-style add-btn",onClick:this.addWentBadly,"data-toggle":"modal","data-target":"#wentWellModal","aria-label":"Add new what went badly card"},r.a.createElement("span",{className:"fa fa-plus-circle"}))),r.a.createElement("div",{className:"row"},t)),r.a.createElement("div",{className:"col-12 col-md-4 action-items"},r.a.createElement("div",{className:"column__title"},r.a.createElement("h3",null,"The Action Items"),r.a.createElement("button",{className:"reset-button-style add-btn",onClick:this.addActionItem,"data-toggle":"modal","data-target":"#wentWellModal","aria-label":"Add new action item card"},r.a.createElement("span",{className:"fa fa-plus-circle"}))),r.a.createElement("div",{className:"row"},a))),r.a.createElement("div",{id:"wentWellModal",className:"modal",tabIndex:"-1",role:"dialog"},r.a.createElement("div",{className:"modal-dialog",role:"document"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title"},this.state.formState.title),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},r.a.createElement("div",{className:"row"},r.a.createElement("label",{className:"col-3"},"Content"),r.a.createElement("textarea",{cols:"40",rows:"6",id:"newBody"}))),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Close"),r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.saveChanges},"Save"))))))}}]),t}(r.a.Component),D=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(s.a)(this,Object(i.a)(t).call(this))).deleteBoard=e.deleteBoard.bind(Object(h.a)(Object(h.a)(e))),e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"deleteBoard",value:function(){this.props.deleteBoard(this.props.boardData.BoardId)}},{key:"formatDate",value:function(){return new Date(new Date(this.props.boardData.CreatedTime).toString()+" UTC").toLocaleString()}},{key:"render",value:function(){return r.a.createElement("div",{className:"col-12 col-sm-4 col-md-3"},r.a.createElement("div",{className:"active-board"},r.a.createElement("div",{className:"active-board__body"},r.a.createElement("div",{className:"active-board__title"},r.a.createElement("a",{href:this.props.openBoardUrl+this.props.boardData.BoardId},this.props.boardData.BoardTitle)),r.a.createElement("div",{className:"active-board__delete-btn"},r.a.createElement("img",{className:"active-board__delete-icon",src:f.a,alt:"delete","aria-label":"Delete board "+this.props.boardData.BoardTitle,onClick:this.deleteBoard})),r.a.createElement("p",{className:"board__date"},r.a.createElement("span",{className:"board__date-icon fa fa-calendar"}),this.formatDate())),r.a.createElement("div",{className:"active-board__footer"},r.a.createElement("a",{href:this.props.exportBoardUrl+"/"+this.props.boardData.BoardId,"aria-label":"Export Board"},r.a.createElement("span",{class:"fa fa-download active-board__export-btn"})))))}}]),t}(r.a.Component),A=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(s.a)(this,Object(i.a)(t).call(this))).state={boardUrl:"",allBoards:[]},e.deleteBoard=e.deleteBoard.bind(Object(h.a)(Object(h.a)(e))),e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"deleteBoard",value:function(e){if(!0===window.confirm("Delete this board?")){var t=this;fetch(k,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({boardId:e})}).then(function(e){return e.json()}).then(function(e){t.setState({allBoards:e})})}}},{key:"getLocalBoards",value:function(){var e=this,t=localStorage.getItem("BoardIds");if(null!=t){var a=JSON.parse(t);fetch(I,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(a)}).then(function(e){return e.json()}).then(function(t){e.setState({allBoards:t})})}}},{key:"getActiveBoards",value:function(){var e=this;fetch(I,{method:"GET",mode:"cors",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(function(e){return e.json()}).then(function(t){e.setState({allBoards:t})})}},{key:"componentDidMount",value:function(){this.getActiveBoards()}},{key:"render",value:function(){""!==this.state.boardUrl&&r.a.createElement("a",{href:this.state.boardUrl},"Open new board");for(var e=[],t=0;t<this.state.allBoards.length;t++)e.push(r.a.createElement(D,{key:t,boardData:this.state.allBoards[t],openBoardUrl:"/?boardId=",deleteBoard:this.deleteBoard,exportBoardUrl:_}));return r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"page__title align-bottom"},r.a.createElement("h2",null,"Active Boards")),r.a.createElement("div",{className:"row"},e))))}}]),t}(r.a.Component),W=a(71),x=a.n(W),R=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(s.a)(this,Object(i.a)(t).call(this))).createBoard=e.createBoard.bind(Object(h.a)(Object(h.a)(e))),e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"createBoard",value:function(){var e=document.getElementById("newBoardTitle").value;""!=e?fetch(O,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({boardTitle:e})}).then(function(e){return e.json()}).then(function(e){var t="/?boardId="+e.boardId;window.location=t}):alert("Title is required.")}},{key:"render",value:function(){var e=S.getURLParam(window.location,"boardId"),t=r.a.createElement(A,null);return""!==e&&(t=r.a.createElement(T,null)),r.a.createElement("div",{className:"App container-fluid"},r.a.createElement("header",{className:"App-header"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 header__logo"},r.a.createElement("div",{className:"header__logo--center"},r.a.createElement("a",{href:"/"},r.a.createElement("img",{className:"header__logo-image",src:x.a,alt:"logo"}))))),r.a.createElement("div",{className:"row create-new-board"},r.a.createElement("div",{className:"col-5"},r.a.createElement("h2",{className:"new-board__title new-board__center"},"Create New Board")),r.a.createElement("div",{className:"col-5"},r.a.createElement("input",{type:"text",className:"form-control new-board__center",id:"newBoardTitle",placeholder:"Board title","aria-label":"Board title"})),r.a.createElement("div",{className:"col-2"},r.a.createElement("button",{className:"btn btn-primary btn-create-board new-board__center",onClick:this.createBoard,"aria-label":"Create board"},"Create New Board")))),r.a.createElement("main",{className:"main-content"},t),r.a.createElement("footer",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"footer"},"Copyright \xa9 2019 IP Sprint 14.6 Hackathon. All Rights Reserved.")))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},27:function(e,t,a){e.exports=a.p+"static/media/delete.bd895a50.svg"},70:function(e,t,a){e.exports=a.p+"static/media/edit.163f0b79.svg"},71:function(e,t,a){e.exports=a.p+"static/media/retro-logo@2x.b6436ee6.png"},72:function(e,t,a){e.exports=a(143)}},[[72,2,1]]]);
//# sourceMappingURL=main.5353bf9e.chunk.js.map